<!DOCTYPE html>
<html>
<head>
    <title>LAN Chat</title>
    <style>
        body { font-family: Arial; margin: 20px; background: #f0f0f0; }
        #messages { height: 500px; overflow-y: scroll; background: white; border-radius: 10px; padding: 20px; margin: 20px 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        #input { width: 60%; padding: 12px; border: 2px solid #ddd; border-radius: 25px; font-size: 16px; }
        #send { padding: 12px 25px; background: #007bff; color: white; border: none; border-radius: 25px; cursor: pointer; font-size: 16px; margin-left: 10px; }
        #send:hover { background: #0056b3; }
        .message { margin: 5px 0; padding: 8px; background: #e9ecef; border-radius: 15px; word-wrap: break-word; }
    </style>
</head>
<body>
    <h1>üåê LAN Chat Room</h1>
    Username: <input id="username" value="WebUser" style="padding:5px; width:100px;"><br><br>
    <div id="messages"></div>
    <input id="input" placeholder="Type message..." autofocus>
    <button id="send">Send</button>
    
    <script>
        const ws = new WebSocket('ws://' + location.host);
        const messages = document.getElementById('messages');
        const input = document.getElementById('input');
        const sendBtn = document.getElementById('send');
        const username = document.getElementById('username');
        
        ws.onopen = () => console.log('Connected');
        ws.onclose = () => console.log('Disconnected');
        
        function addMessage(data) {
            const div = document.createElement('div');
            div.className = 'message';
            div.textContent = data;
            messages.appendChild(div);
            messages.scrollTop = messages.scrollHeight;
        }
        
        function sendMessage() {
            const msg = input.value.trim();
            if (msg) {
                ws.send(username.value + ': ' + msg + '\r\n');
                input.value = '';
            }
        }
        
        // Enter sends
        input.addEventListener('keypress', e => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });
        
        // Send button
        sendBtn.onclick = sendMessage;
        
        // Receive raw data
        ws.onmessage = e => {
            addMessage(e.data);
        };
    </script>
</body>
</html>

